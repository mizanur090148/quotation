(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{12:function(t,e,s){var r=s(46);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};s(6)(r,o);r.locals&&(t.exports=r.locals)},4:function(t,e,s){var r=s(40);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};s(6)(r,o);r.locals&&(t.exports=r.locals)},40:function(t,e,s){(t.exports=s(5)(!1)).push([t.i,".vld-shown {\n  overflow: hidden;\n}\n\n.vld-overlay {\n  bottom: 0;\n  left: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  align-items: center;\n  display: none;\n  justify-content: center;\n  overflow: hidden;\n  z-index: 9999;\n}\n\n.vld-overlay.is-active {\n  display: flex;\n}\n\n.vld-overlay.is-full-page {\n  z-index: 9999;\n  position: fixed;\n}\n\n.vld-overlay .vld-background {\n  bottom: 0;\n  left: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  background: #fff;\n  opacity: 0.5;\n}\n\n.vld-overlay .vld-icon, .vld-parent {\n  position: relative;\n}\n\n",""])},45:function(t,e,s){"use strict";var r=s(12);s.n(r).a},46:function(t,e,s){(t.exports=s(5)(!1)).push([t.i,"\n.modal-dialog[data-v-19ca16c5] {\n    max-width: 750px !important;\n}\n/*   .btn i {\n    font-size: 10px !important;\n  } */\n",""])},98:function(t,e,s){"use strict";s.r(e);var r=s(0),o=(s(4),s(2),{data:function(){return{errors:[],form:new Form({purchase_invoice:"",stock_in_status:1,stock_in_document:"",shipping_cost:0,others_cost:0,note:"",created_by:1,outlet_id:1,product_detail_list:[]}),suppliers:[],supplier_errors:[],supplier_form:new Form({name:"",trn_no:"",address:"",mobile_no:"",telephone_no:"",responsible_person:"",email:""}),products:[],product:null,search_product:""}},mounted:function(){this.supplierDropdowndata(),this.$route.params.id?this.getStockInChallanInfo(this.$route.params.id):this.getStockInChallan()},watch:{"form.product_detail_list":{handler:function(t,e){var s=this;t.forEach((function(t){var e=t.tax_value*t.quantity,r=t.quantity*t.purchase_price;r=r+e-s.calculateDiscount(r,t.discount_percentage),t.product_wise_total=Math.round(r)}))},deep:!0}},computed:{total_cost:function(){var t=0;return this.form.product_detail_list.forEach((function(e){t+=parseFloat(e.product_wise_total)})),t}},methods:{getStockInChallan:function(){this.form.purchase_invoice=Date.now()},autoComplete:function(){var t=this;this.products=[],this.search_product.length>0&&r.a.get("/search-product-in-purchase",{params:{search_product:this.search_product}}).then((function(e){t.products=e.data})).catch((function(t){console.log(t)}))},getProductInfo:function(t){var e=this;this.search_product="",this.products=[];var s=this.lastSelectedSupplierId();r.a.get("products/"+t).then((function(t){e.product=t.data,e.form.product_detail_list.push({supplier_id:s,name:e.product.name,code:e.product.code,product_id:e.product.id,quantity:1,purchase_price:e.product.purchase_price,tax_percentage:e.product.tax_percentage,tax_value:e.product.purchase_tax_value,discount_percentage:0,product_wise_total:1*e.product.purchase_price})})).catch((function(t){console.log(t)}))},lastSelectedSupplierId:function(){var t="",e=this.form.product_detail_list.length;return e>0&&(--e,t=this.form.product_detail_list[e].supplier_id),t},calculateDiscount:function(t,e){return(t*(e/100)).toFixed(2)},closeModal:function(t){this.$modal.hide(t)},deleteRow:function(t,e){var s=this;this.form.product_detail_list.length>1?this.$snotify.confirm("Are you sure to delete this?",{closeOnClick:!1,pauseOnHover:!0,buttons:[{text:"Yes",action:function(e){s.$snotify.remove(e.id);var r=s.form.product_detail_list.indexOf(t);s.form.product_detail_list.splice(r,1)},bold:!0},{text:"No",action:function(t){s.$snotify.remove(t.id)},bold:!0}]}):alert("You can not delete this")},store:function(){var t=this;this.errors=[];var e=this.$loading.show({container:this.$refs.supplierContainer,canCancel:!0,loader:"bars"});r.a.post("/stock-ins",this.form).then((function(e){200==e.status?(t.$snotify.success("Successfully created","Success"),t.$router.push({name:"stock-ins"})):t.$snotify.error("Something went worng","error")})).catch((function(e){t.errors=e.response.data.errors})).finally((function(t){e.hide()}))},getStockInChallanInfo:function(t){var e=this;r.a.get("stock-ins/"+t).then((function(t){e.form=t.data,e.form.product_detail_list=t.data.stock_ins})).catch((function(t){console.log(t)})).finally((function(){}))},supplierDropdowndata:function(){var t=this;r.a.get("/supplier-dropdown-data").then((function(e){t.suppliers=e.data})).catch((function(t){console.log(t)}))},supplierModal:function(){this.supplier_form.reset(),this.supplier_form.clear(),this.$modal.show("supplierModal")},supplierStore:function(){var t=this;this.supplier_errors=[];var e=this.$loading.show({container:this.$refs.supplierContainer,canCancel:!0,loader:"bars"});r.a.post("/suppliers",this.supplier_form).then((function(e){200==e.status?(t.supplierDropdowndata(),t.$snotify.success("Successfully created","Success"),t.$modal.hide("supplierModal"),t.loader.hide()):t.$snotify.error("Something went worng","error")})).catch((function(e){t.supplier_errors=e.response.data.errors})).finally((function(t){e.hide()}))}}}),a=(s(45),s(1)),i=Object(a.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content-wrapper"},[s("div",{staticClass:"row justify-content-md-center"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("h4",{staticClass:"card-title"},[t._v("New Entry Form")]),t._v(" "),s("hr"),t._v(" "),s("form",{staticClass:"forms-sample",on:{submit:function(e){return e.preventDefault(),t.store(e)}}},[s("div",{staticClass:"row p-2"},[s("div",{staticClass:"col-3"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Purchase Invoice")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.purchase_invoice,expression:"form.purchase_invoice"}],staticClass:"form-control form-control-sm",class:{"is-invalid":t.errors.purchase_invoice},attrs:{type:"text",disabled:""},domProps:{value:t.form.purchase_invoice},on:{input:function(e){e.target.composing||t.$set(t.form,"purchase_invoice",e.target.value)}}}),t._v(" "),t.errors.purchase_invoice?s("small",{staticClass:"text-danger"},[t._v(t._s(t.errors.purchase_invoice[0]))]):t._e()])]),t._v(" "),s("div",{staticClass:"col-3"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Status")]),t._v(" "),s("div",{staticClass:"input-group col-xs-12"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.stock_in_status,expression:"form.stock_in_status"}],staticClass:"form-control form-control-sm",class:{"is-invalid":t.errors.stock_in_status},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"stock_in_status",e.target.multiple?s:s[0])}}},[s("option",{key:0,domProps:{value:0}},[t._v("Pending")]),t._v(" "),s("option",{key:1,domProps:{value:1}},[t._v("Received")])])]),t._v(" "),t.errors.stock_in_status?s("small",{staticClass:"text-danger"},[t._v(t._s(t.errors.stock_in_status[0]))]):t._e()])]),t._v(" "),s("div",{staticClass:"col-3"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Supplier")]),t._v(" "),s("div"),t._v(" "),s("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"},on:{click:t.supplierModal}},[t._v("Add Supplier")])])])]),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"row p-2"},[s("div",{staticClass:"col-6"},[s("div",{staticClass:"form-group"},[t._v("\n                  Search & Select Product\n                  "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.search_product,expression:"search_product"}],staticClass:"form-control form-control-sm",attrs:{type:"text",placeholder:"Search product"},domProps:{value:t.search_product},on:{keyup:t.autoComplete,input:function(e){e.target.composing||(t.search_product=e.target.value)}}}),t._v(" "),t.errors.product?s("small",{staticClass:"text-danger"},[t._v(t._s(t.errors.product[0]))]):t._e(),t._v(" "),t.products.length?s("div",{staticClass:"panel-footer"},[s("ul",{staticClass:"list-group"},t._l(t.products,(function(e,r){return s("a",{key:r,staticClass:"list-group-item",attrs:{href:"#"},on:{click:function(s){return t.getProductInfo(e.id)}}},[t._v(t._s(e.name))])})),0)]):t._e()])])]),t._v(" "),s("div",{staticClass:"row"},[s("table",{staticClass:"list-table"},[t._m(0),t._v(" "),t.form.product_detail_list.length?s("tbody",[t._l(t.form.product_detail_list,(function(e,r){return s("tr",{key:r},[s("td",[s("select",{directives:[{name:"model",rawName:"v-model",value:e.supplier_id,expression:"product_detail.supplier_id"}],staticClass:"form-control form-control-sm",class:{"is-invalid":t.errors.supplier_id},attrs:{required:""},on:{change:function(s){var r=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(e,"supplier_id",s.target.multiple?r:r[0])}}},[s("option",{attrs:{value:""}},[t._v("Please select a supplier")]),t._v(" "),t._l(t.suppliers,(function(e,r){return s("option",{key:r,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2)]),t._v(" "),s("td",[t._v("\n                        "+t._s(e.name?e.name:e.product.name)+"\n                      ")]),t._v(" "),s("td",[t._v("                    \n                        "+t._s(e.code?e.code:e.product.code)+"\n                      ")]),t._v(" "),s("td",{staticClass:"text-center"},[s("div",{staticClass:"input-group col-xs-12"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.quantity,expression:"product_detail.quantity"}],staticClass:"form-control form-control-sm text-right",class:{"is-invalid":t.errors.quantity},staticStyle:{width:"70px !important"},attrs:{type:"number",placeholder:"Enter quantity"},domProps:{value:e.quantity},on:{input:function(s){s.target.composing||t.$set(e,"quantity",s.target.value)}}}),t._v(" "),t._m(1,!0),t._v(" "),t.errors.quantity?s("small",{staticClass:"text-danger"},[t._v(t._s(t.errors.quantity[0]))]):t._e()])]),t._v(" "),s("td",{staticClass:"text-center"},[t._v("\n                        "+t._s(e.purchase_price)+"\n                      ")]),t._v(" "),s("td",[s("div",{staticClass:"input-group col-xs-12"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.discount_percentage,expression:"product_detail.discount_percentage"}],staticClass:"form-control form-control-sm text-right",class:{"is-invalid":t.errors.discount_percentage},staticStyle:{width:"60px !important"},attrs:{type:"number",placeholder:"Discount percentage"},domProps:{value:e.discount_percentage},on:{input:function(s){s.target.composing||t.$set(e,"discount_percentage",s.target.value)}}}),t._v(" "),t._m(2,!0),t._v(" "),t.errors.discount_percentage?s("small",{staticClass:"text-danger"},[t._v(t._s(t.errors.discount_percentage[0]))]):t._e()])]),t._v(" "),s("td",[t._v("                     \n                        "+t._s(e.tax_percentage)+"%\n                      ")]),t._v(" "),s("td",{staticClass:"text-center"},[t._v("\n                        "+t._s(Math.round(e.product_wise_total))+"\n                      ")]),t._v(" "),s("td",{staticClass:"text-center"},[s("button",{staticClass:"btn btn-xs btn-danger btn-rounded btn-fw",attrs:{type:"button"},on:{click:function(s){return t.deleteRow(r,e)}}},[s("i",{staticClass:"mdi mdi-delete"})])])])})),t._v(" "),s("tr",{staticClass:"font-weight-bold"},[s("td",{attrs:{colspan:"7"}},[t._v("Grand Total")]),t._v(" "),s("td",[t._v(t._s(Math.round(t.total_cost)))])])],2):t._e()])]),t._v(" "),s("div",{staticClass:"row p-4"},[s("div",{staticClass:"col-3"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Shipping Cost")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.shipping_cost,expression:"form.shipping_cost"}],staticClass:"form-control form-control-sm",class:{"is-invalid":t.errors.shipping_cost},attrs:{type:"number"},domProps:{value:t.form.shipping_cost},on:{input:function(e){e.target.composing||t.$set(t.form,"shipping_cost",e.target.value)}}}),t._v(" "),t.errors.shipping_cost?s("small",{staticClass:"text-danger"},[t._v(t._s(t.errors.shipping_cost[0]))]):t._e()])]),t._v(" "),s("div",{staticClass:"col-3"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Other's Cost")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.others_cost,expression:"form.others_cost"}],staticClass:"form-control form-control-sm",class:{"is-invalid":t.errors.others_cost},attrs:{type:"number"},domProps:{value:t.form.others_cost},on:{input:function(e){e.target.composing||t.$set(t.form,"others_cost",e.target.value)}}}),t._v(" "),t.errors.others_cost?s("small",{staticClass:"text-danger"},[t._v(t._s(t.errors.others_cost[0]))]):t._e()])]),t._v(" "),s("div",{staticClass:"col-6"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Note")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.note,expression:"form.note"}],staticClass:"form-control form-control-sm",class:{"is-invalid":t.errors.note},attrs:{placeholder:"Enter note"},domProps:{value:t.form.note},on:{input:function(e){e.target.composing||t.$set(t.form,"note",e.target.value)}}})]),t._v(" "),t.errors.note?s("small",{staticClass:"text-danger"},[t._v(t._s(t.errors.note[0]))]):t._e()])]),t._v(" "),s("div",{staticClass:"row p-2 justify-content-md-center"},[s("div",{staticClass:"form-group"},[s("button",{staticClass:"btn btn-sm btn-primary mr-2",attrs:{type:"submit"}},[t._v("Submit")]),t._v(" "),s("router-link",{attrs:{to:"/home"}},[s("button",{staticClass:"btn btn-sm btn-danger mr-2"},[t._v("Cancel")])])],1)])])])])])]),t._v(" "),s("modal",{attrs:{name:"supplierModal",width:795,height:375}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v("New supplier")]),t._v(" "),s("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.closeModal("supplierModal")}}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._v(" "),s("form",{on:{submit:function(e){return e.preventDefault(),t.supplierStore()}}},[s("div",{staticClass:"modal-body"},[s("div",{staticClass:"row p-2"},[s("div",{staticClass:"col-4"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Supplier Name")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.supplier_form.name,expression:"supplier_form.name"}],staticClass:"form-control form-control-sm",class:{"is-invalid":t.supplier_errors.name},attrs:{type:"text",placeholder:"Enter supplier name"},domProps:{value:t.supplier_form.name},on:{input:function(e){e.target.composing||t.$set(t.supplier_form,"name",e.target.value)}}}),t._v(" "),t.supplier_errors.name?s("small",{staticClass:"text-danger"},[t._v(t._s(t.supplier_errors.name[0]))]):t._e()])]),t._v(" "),s("div",{staticClass:"col-4"},[s("div",{staticClass:"form-group"},[s("label",[t._v("TRN No.")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.supplier_form.trn_no,expression:"supplier_form.trn_no"}],staticClass:"form-control form-control-sm",class:{"is-invalid":t.supplier_errors.trn_no},attrs:{type:"text",placeholder:"Enter trn no"},domProps:{value:t.supplier_form.trn_no},on:{input:function(e){e.target.composing||t.$set(t.supplier_form,"trn_no",e.target.value)}}}),t._v(" "),t.supplier_errors.trn_no?s("small",{staticClass:"text-danger"},[t._v(t._s(t.supplier_errors.trn_no[0]))]):t._e()])]),t._v(" "),s("div",{staticClass:"col-4"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Attention Name")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.supplier_form.responsible_person,expression:"supplier_form.responsible_person"}],staticClass:"form-control form-control-sm",class:{"is-invalid":t.supplier_errors.responsible_person},attrs:{type:"text",placeholder:"Enter attention name"},domProps:{value:t.supplier_form.responsible_person},on:{input:function(e){e.target.composing||t.$set(t.supplier_form,"responsible_person",e.target.value)}}}),t._v(" "),t.supplier_errors.responsible_person?s("small",{staticClass:"text-danger"},[t._v(t._s(t.supplier_errors.responsible_person[0]))]):t._e()])])]),t._v(" "),s("div",{staticClass:"row p-2"},[s("div",{staticClass:"col-4"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Telephone No.")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.supplier_form.telephone_no,expression:"supplier_form.telephone_no"}],staticClass:"form-control form-control-sm",class:{"is-invalid":t.supplier_errors.telephone_no},attrs:{type:"text",placeholder:"Enter telephone no"},domProps:{value:t.supplier_form.telephone_no},on:{input:function(e){e.target.composing||t.$set(t.supplier_form,"telephone_no",e.target.value)}}}),t._v(" "),t.supplier_errors.telephone_no?s("small",{staticClass:"text-danger"},[t._v(t._s(t.supplier_errors.telephone_no[0]))]):t._e()])]),t._v(" "),s("div",{staticClass:"col-4"},[s("div",{staticClass:"form-group"},[s("label",[t._v("E-mail")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.supplier_form.email,expression:"supplier_form.email"}],staticClass:"form-control form-control-sm",class:{"is-invalid":t.supplier_errors.email},attrs:{type:"text",placeholder:"Enter email"},domProps:{value:t.supplier_form.email},on:{input:function(e){e.target.composing||t.$set(t.supplier_form,"email",e.target.value)}}}),t._v(" "),t.supplier_errors.email?s("small",{staticClass:"text-danger"},[t._v(t._s(t.supplier_errors.email[0]))]):t._e()])]),t._v(" "),s("div",{staticClass:"col-4"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Address")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.supplier_form.address,expression:"supplier_form.address"}],staticClass:"form-control form-control-sm",class:{"is-invalid":t.supplier_errors.address},attrs:{type:"text",placeholder:"Enter address"},domProps:{value:t.supplier_form.address},on:{input:function(e){e.target.composing||t.$set(t.supplier_form,"address",e.target.value)}}}),t._v(" "),t.supplier_errors.address?s("small",{staticClass:"text-danger"},[t._v(t._s(t.supplier_errors.address[0]))]):t._e()])])])]),t._v(" "),s("div",{staticClass:"modal-footer justify-content-md-center"},[s("div",{staticClass:"form-group"},[s("button",{staticClass:"btn btn-sm btn-primary mr-2",attrs:{type:"submit"}},[t._v("Submit")]),t._v(" "),s("button",{staticClass:"btn btn-sm btn-danger mr-2",attrs:{type:"button"},on:{click:function(e){return t.closeModal("supplierModal")}}},[t._v("Close")])])])])])])]),t._v(" "),s("vue-snotify")],1)}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("td",{attrs:{colspan:"9"}},[t._v("Product Details Table")])]),t._v(" "),s("tr",[s("td",[t._v("Supplier")]),t._v(" "),s("td",[t._v("Product Name")]),t._v(" "),s("td",[t._v("Product Code")]),t._v(" "),s("td",[t._v("Quantity")]),t._v(" "),s("td",[t._v("Unit Cost")]),t._v(" "),s("td",[t._v("Discount(%)")]),t._v(" "),s("td",[t._v("Tax(%)")]),t._v(" "),s("td",[t._v("Product Total")]),t._v(" "),s("td",[t._v("Actions")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"}},[this._v("Pcs")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"}},[this._v("%")])])}],!1,null,"19ca16c5",null);e.default=i.exports}}]);