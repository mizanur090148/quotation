(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{100:function(t,e,s){"use strict";s.r(e);var o=s(0);s(4),s(2);function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var a={data:function(){var t;return r(t={errors:[],customers:[],form:new Form({customer_id:"",invoice_number:"",payment_status:1,stock_in_document:"",delivery_cost:0,others_cost:0,note:"",created_by:1,outlet_id:1,product_detail_list:[]})},"customers",[]),r(t,"customer_errors",[]),r(t,"customer_form",new Form({name:"",address:"",mobile_no:"",telephone_no:"",attention_name:"",email:""})),r(t,"products",[]),r(t,"product",null),r(t,"search_product",""),t},mounted:function(){this.customerDropdowndata(),this.$route.params.id?this.getSaleInfo(this.$route.params.id):this.getSaleInvoiceNo()},watch:{"form.product_detail_list":{handler:function(t,e){var s=this;t.forEach((function(t){var e=t.tax_value*t.quantity,o=t.quantity*t.sale_price;o=o+e-s.calculateDiscount(o,t.discount_percentage),t.product_wise_total=o.toFixed(2)}))},deep:!0}},computed:{total_cost:function(){var t=0;return this.form.product_detail_list.forEach((function(e){t+=parseFloat(e.product_wise_total)})),t.toFixed(2)}},methods:{getSaleInvoiceNo:function(){this.form.invoice_number=Date.now()},autoComplete:function(){var t=this;this.products=[],this.search_product.length>0&&o.a.get("/search-product-in-purchase",{params:{search_product:this.search_product}}).then((function(e){t.products=e.data})).catch((function(t){console.log(t)}))},getProductInfo:function(t){var e=this;this.search_product="",this.products=[],o.a.get("products/"+t).then((function(t){e.product=t.data,e.form.product_detail_list.push({name:e.product.name,code:e.product.code,product_id:e.product.id,quantity:1,sale_price:e.product.sale_price,tax_percentage:e.product.tax_percentage,tax_value:e.product.sale_tax_value,discount_percentage:0,product_wise_total:1*e.product.sale_price})})).catch((function(t){console.log(t)}))},calculateDiscount:function(t,e){return t*(e/100)},closeModal:function(t){this.$modal.hide(t)},deleteRow:function(t,e){var s=this;this.form.product_detail_list.length>1?this.$snotify.confirm("Are you sure to delete this?",{closeOnClick:!1,pauseOnHover:!0,buttons:[{text:"Yes",action:function(e){s.$snotify.remove(e.id);var o=s.form.product_detail_list.indexOf(t);s.form.product_detail_list.splice(o,1)},bold:!0},{text:"No",action:function(t){s.$snotify.remove(t.id)},bold:!0}]}):alert("You can not delete this")},store:function(){var t=this;this.errors=[];var e=this.$loading.show({container:this.$refs.customerContainer,canCancel:!0,loader:"bars"});o.a.post("/sales",this.form).then((function(e){200==e.status?(t.$snotify.success("Successfully created","Success"),t.$router.push({name:"sales"})):t.$snotify.error("Something went worng","error")})).catch((function(e){t.errors=e.response.data.errors})).finally((function(t){e.hide()}))},getSaleInfo:function(t){var e=this;o.a.get("sales/"+t).then((function(t){e.form=t.data,e.form.product_detail_list=t.data.sales})).catch((function(t){console.log(t)})).finally((function(){}))},customerDropdowndata:function(){var t=this;o.a.get("/customer-dropdown-data").then((function(e){t.customers=e.data})).catch((function(t){console.log(t)}))},customerModal:function(){this.customer_form.reset(),this.customer_form.clear(),this.$modal.show("customerModal")},customerStore:function(){var t=this;this.customer_errors=[];var e=this.$loading.show({container:this.$refs.customerContainer,canCancel:!0,loader:"bars"});o.a.post("/customers",this.customer_form).then((function(e){200==e.status?(t.customerDropdowndata(),t.$snotify.success("Successfully created","Success"),t.$modal.hide("customerModal"),t.loader.hide()):t.$snotify.error("Something went worng","error")})).catch((function(e){t.customer_errors=e.response.data.errors})).finally((function(t){e.hide()}))}}},n=(s(49),s(1)),i=Object(n.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content-wrapper"},[s("div",{staticClass:"row justify-content-md-center"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("h4",{staticClass:"card-title"},[t._v("New Entry Form")]),t._v(" "),s("hr"),t._v(" "),s("form",{staticClass:"forms-sample",on:{submit:function(e){return e.preventDefault(),t.store(e)}}},[s("div",{staticClass:"row p-2"},[s("div",{staticClass:"col-3"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Customer")]),t._v(" "),s("div",{staticClass:"input-group col-xs-12"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.customer_id,expression:"form.customer_id"}],staticClass:"form-control form-control-sm",class:{"is-invalid":t.errors.customer_id},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"customer_id",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:""}},[t._v("Please select a customer")]),t._v(" "),t._l(t.customers,(function(e,o){return s("option",{key:o,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2),t._v(" "),s("span",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"},on:{click:t.customerModal}},[t._v("+")])])]),t._v(" "),t.errors.customer_id?s("small",{staticClass:"text-danger"},[t._v(t._s(t.errors.customer_id[0]))]):t._e()])]),t._v(" "),s("div",{staticClass:"col-3"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Invoice Number")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.invoice_number,expression:"form.invoice_number"}],staticClass:"form-control form-control-sm",class:{"is-invalid":t.errors.invoice_number},attrs:{type:"text",disabled:""},domProps:{value:t.form.invoice_number},on:{input:function(e){e.target.composing||t.$set(t.form,"invoice_number",e.target.value)}}}),t._v(" "),t.errors.invoice_number?s("small",{staticClass:"text-danger"},[t._v(t._s(t.errors.invoice_number[0]))]):t._e()])]),t._v(" "),s("div",{staticClass:"col-3"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Status")]),t._v(" "),s("div",{staticClass:"input-group col-xs-12"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.payment_status,expression:"form.payment_status"}],staticClass:"form-control form-control-sm",class:{"is-invalid":t.errors.payment_status},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"payment_status",e.target.multiple?s:s[0])}}},[s("option",{key:0,domProps:{value:0}},[t._v("Due")]),t._v(" "),s("option",{key:1,domProps:{value:1}},[t._v("Cash")])])]),t._v(" "),t.errors.payment_status?s("small",{staticClass:"text-danger"},[t._v(t._s(t.errors.payment_status[0]))]):t._e()])])]),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"row p-2"},[s("div",{staticClass:"col-6"},[s("div",{staticClass:"form-group"},[t._v("\n                  Search & Select Product\n                  "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.search_product,expression:"search_product"}],staticClass:"form-control form-control-sm",class:{"is-invalid":t.errors.product},attrs:{type:"text"},domProps:{value:t.search_product},on:{keyup:t.autoComplete,input:function(e){e.target.composing||(t.search_product=e.target.value)}}}),t._v(" "),t.errors.product?s("small",{staticClass:"text-danger"},[t._v(t._s(t.errors.product[0]))]):t._e(),t._v(" "),t.products.length?s("div",{staticClass:"panel-footer"},[s("ul",{staticClass:"list-group"},t._l(t.products,(function(e,o){return s("a",{key:o,staticClass:"list-group-item",attrs:{href:"#"},on:{click:function(s){return t.getProductInfo(e.id)}}},[t._v(t._s(e.name))])})),0)]):t._e()])])]),t._v(" "),s("div",{staticClass:"row"},[s("table",{staticClass:"list-table"},[t._m(0),t._v(" "),t.form.product_detail_list.length?s("tbody",[t._l(t.form.product_detail_list,(function(e,o){return s("tr",{key:o},[s("td",[t._v("\n                        "+t._s(e.name?e.name:e.product.name)+"\n                      ")]),t._v(" "),s("td",[t._v("\n                        "+t._s(e.code?e.code:e.product.code)+"\n                      ")]),t._v(" "),s("td",{staticClass:"text-center"},[s("div",{staticClass:"input-group col-xs-12"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.quantity,expression:"product_detail.quantity"}],staticClass:"form-control form-control-sm",class:{"is-invalid":t.errors.quantity},staticStyle:{width:"70px !important"},attrs:{type:"number",placeholder:"Enter quantity"},domProps:{value:e.quantity},on:{input:function(s){s.target.composing||t.$set(e,"quantity",s.target.value)}}}),t._v(" "),t._m(1,!0),t._v(" "),t.errors.quantity?s("small",{staticClass:"text-danger"},[t._v(t._s(t.errors.quantity[0]))]):t._e()])]),t._v(" "),s("td",{staticClass:"text-center"},[t._v("\n                        "+t._s(e.sale_price)+"\n                      ")]),t._v(" "),s("td",[s("div",{staticClass:"input-group col-xs-12"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.discount_percentage,expression:"product_detail.discount_percentage"}],staticClass:"form-control form-control-sm text-right",class:{"is-invalid":t.errors.discount_percentage},staticStyle:{width:"60px !important"},attrs:{type:"number",placeholder:"Discount percentage"},domProps:{value:e.discount_percentage},on:{input:function(s){s.target.composing||t.$set(e,"discount_percentage",s.target.value)}}}),t._v(" "),t._m(2,!0),t._v(" "),t.errors.discount_percentage?s("small",{staticClass:"text-danger"},[t._v(t._s(t.errors.discount_percentage[0]))]):t._e()])]),t._v(" "),s("td",{staticClass:"text-center"},[t._v("\n                        "+t._s(e.tax_percentage)+"%\n                      ")]),t._v(" "),s("td",{staticClass:"text-center"},[t._v("\n                        "+t._s(e.product_wise_total)+"\n                      ")]),t._v(" "),s("td",{staticClass:"text-center"},[s("button",{staticClass:"btn btn-xs btn-danger btn-rounded btn-fw",attrs:{type:"button"},on:{click:function(s){return t.deleteRow(o,e)}}},[s("i",{staticClass:"mdi mdi-delete"})])])])})),t._v(" "),s("tr",{staticClass:"font-weight-bold"},[s("td",{staticClass:"text-right",attrs:{colspan:"6"}},[t._v("Grand Total")]),t._v(" "),s("td",{staticClass:"text-center"},[t._v(t._s(t.total_cost))])])],2):t._e()])]),t._v(" "),s("div",{staticClass:"row p-4"},[s("div",{staticClass:"col-3"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Delivery Cost")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.delivery_cost,expression:"form.delivery_cost"}],staticClass:"form-control form-control-sm",class:{"is-invalid":t.errors.delivery_cost},attrs:{type:"number"},domProps:{value:t.form.delivery_cost},on:{input:function(e){e.target.composing||t.$set(t.form,"delivery_cost",e.target.value)}}}),t._v(" "),t.errors.delivery_cost?s("small",{staticClass:"text-danger"},[t._v(t._s(t.errors.delivery_cost[0]))]):t._e()])]),t._v(" "),s("div",{staticClass:"col-3"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Other's Cost")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.others_cost,expression:"form.others_cost"}],staticClass:"form-control form-control-sm",class:{"is-invalid":t.errors.others_cost},attrs:{type:"number"},domProps:{value:t.form.others_cost},on:{input:function(e){e.target.composing||t.$set(t.form,"others_cost",e.target.value)}}}),t._v(" "),t.errors.others_cost?s("small",{staticClass:"text-danger"},[t._v(t._s(t.errors.others_cost[0]))]):t._e()])]),t._v(" "),s("div",{staticClass:"col-6"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Note")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.note,expression:"form.note"}],staticClass:"form-control form-control-sm",class:{"is-invalid":t.errors.note},attrs:{placeholder:"Enter note"},domProps:{value:t.form.note},on:{input:function(e){e.target.composing||t.$set(t.form,"note",e.target.value)}}})]),t._v(" "),t.errors.note?s("small",{staticClass:"text-danger"},[t._v(t._s(t.errors.note[0]))]):t._e()])]),t._v(" "),s("div",{staticClass:"row p-2 justify-content-md-center"},[s("div",{staticClass:"form-group"},[s("button",{staticClass:"btn btn-sm btn-primary mr-2",attrs:{type:"submit"}},[t._v("Submit")]),t._v(" "),s("router-link",{attrs:{to:"/home"}},[s("button",{staticClass:"btn btn-sm btn-danger mr-2"},[t._v("Cancel")])])],1)])])])])])]),t._v(" "),s("modal",{attrs:{name:"customerModal",width:795,height:375}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v("New Customer")]),t._v(" "),s("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.closeModal("customerModal")}}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("Ã—")])])]),t._v(" "),s("form",{on:{submit:function(e){return e.preventDefault(),t.customerStore()}}},[s("div",{staticClass:"modal-body"},[s("div",{staticClass:"row p-2"},[s("div",{staticClass:"col-4"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Customer Name")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.customer_form.name,expression:"customer_form.name"}],staticClass:"form-control form-control-sm",class:{"is-invalid":t.customer_errors.name},attrs:{type:"text",placeholder:"Enter customer name"},domProps:{value:t.customer_form.name},on:{input:function(e){e.target.composing||t.$set(t.customer_form,"name",e.target.value)}}}),t._v(" "),t.customer_errors.name?s("small",{staticClass:"text-danger"},[t._v(t._s(t.customer_errors.name[0]))]):t._e()])]),t._v(" "),s("div",{staticClass:"col-4"},[s("div",{staticClass:"form-group"},[s("label",[t._v("TRN No.")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.customer_form.trn_no,expression:"customer_form.trn_no"}],staticClass:"form-control form-control-sm",class:{"is-invalid":t.customer_errors.trn_no},attrs:{type:"text",placeholder:"Enter mobile no"},domProps:{value:t.customer_form.trn_no},on:{input:function(e){e.target.composing||t.$set(t.customer_form,"trn_no",e.target.value)}}}),t._v(" "),t.customer_errors.trn_no?s("small",{staticClass:"text-danger"},[t._v(t._s(t.customer_errors.trn_no[0]))]):t._e()])]),t._v(" "),s("div",{staticClass:"col-4"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Attention Name")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.customer_form.attention_name,expression:"customer_form.attention_name"}],staticClass:"form-control form-control-sm",class:{"is-invalid":t.customer_errors.attention_name},attrs:{type:"text",placeholder:"Enter responsible person"},domProps:{value:t.customer_form.attention_name},on:{input:function(e){e.target.composing||t.$set(t.customer_form,"attention_name",e.target.value)}}}),t._v(" "),t.customer_errors.attention_name?s("small",{staticClass:"text-danger"},[t._v(t._s(t.customer_errors.attention_name[0]))]):t._e()])])]),t._v(" "),s("div",{staticClass:"row p-2"},[s("div",{staticClass:"col-4"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Telephone No.")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.customer_form.telephone_no,expression:"customer_form.telephone_no"}],staticClass:"form-control form-control-sm",class:{"is-invalid":t.customer_errors.telephone_no},attrs:{type:"text",placeholder:"Enter telephone no"},domProps:{value:t.customer_form.telephone_no},on:{input:function(e){e.target.composing||t.$set(t.customer_form,"telephone_no",e.target.value)}}}),t._v(" "),t.customer_errors.telephone_no?s("small",{staticClass:"text-danger"},[t._v(t._s(t.customer_errors.telephone_no[0]))]):t._e()])]),t._v(" "),s("div",{staticClass:"col-4"},[s("div",{staticClass:"form-group"},[s("label",[t._v("E-mail")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.customer_form.email,expression:"customer_form.email"}],staticClass:"form-control form-control-sm",class:{"is-invalid":t.customer_errors.email},attrs:{type:"text",placeholder:"Enter customer email"},domProps:{value:t.customer_form.email},on:{input:function(e){e.target.composing||t.$set(t.customer_form,"email",e.target.value)}}}),t._v(" "),t.customer_errors.email?s("small",{staticClass:"text-danger"},[t._v(t._s(t.customer_errors.email[0]))]):t._e()])]),t._v(" "),s("div",{staticClass:"col-4"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Address")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.customer_form.address,expression:"customer_form.address"}],staticClass:"form-control form-control-sm",class:{"is-invalid":t.customer_errors.address},attrs:{type:"text",placeholder:"Enter customer address"},domProps:{value:t.customer_form.address},on:{input:function(e){e.target.composing||t.$set(t.customer_form,"address",e.target.value)}}}),t._v(" "),t.customer_errors.address?s("small",{staticClass:"text-danger"},[t._v(t._s(t.customer_errors.address[0]))]):t._e()])])])]),t._v(" "),s("div",{staticClass:"modal-footer justify-content-md-center"},[s("div",{staticClass:"form-group"},[s("button",{staticClass:"btn btn-sm btn-primary mr-2",attrs:{type:"submit"}},[t._v("Submit")]),t._v(" "),s("button",{staticClass:"btn btn-sm btn-danger mr-2",attrs:{type:"button"},on:{click:function(e){return t.closeModal("customerModal")}}},[t._v("Close")])])])])])])]),t._v(" "),s("vue-snotify")],1)}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("td",{attrs:{colspan:"9"}},[t._v("Ordered Product Details")])]),t._v(" "),s("tr",[s("td",[t._v("Product Name")]),t._v(" "),s("td",[t._v("Product Code")]),t._v(" "),s("td",[t._v("Quantity")]),t._v(" "),s("td",[t._v("Unit Price")]),t._v(" "),s("td",[t._v("Discount")]),t._v(" "),s("td",[t._v("Tax(5%)")]),t._v(" "),s("td",[t._v("Total")]),t._v(" "),s("td",[t._v("Actions")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"}},[this._v("Pcs")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"}},[this._v("%")])])}],!1,null,"177d62c5",null);e.default=i.exports},14:function(t,e,s){var o=s(50);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};s(6)(o,r);o.locals&&(t.exports=o.locals)},4:function(t,e,s){var o=s(40);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};s(6)(o,r);o.locals&&(t.exports=o.locals)},40:function(t,e,s){(t.exports=s(5)(!1)).push([t.i,".vld-shown {\n  overflow: hidden;\n}\n\n.vld-overlay {\n  bottom: 0;\n  left: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  align-items: center;\n  display: none;\n  justify-content: center;\n  overflow: hidden;\n  z-index: 9999;\n}\n\n.vld-overlay.is-active {\n  display: flex;\n}\n\n.vld-overlay.is-full-page {\n  z-index: 9999;\n  position: fixed;\n}\n\n.vld-overlay .vld-background {\n  bottom: 0;\n  left: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  background: #fff;\n  opacity: 0.5;\n}\n\n.vld-overlay .vld-icon, .vld-parent {\n  position: relative;\n}\n\n",""])},49:function(t,e,s){"use strict";var o=s(14);s.n(o).a},50:function(t,e,s){(t.exports=s(5)(!1)).push([t.i,"\n.modal-dialog[data-v-177d62c5] {\n    max-width: 750px !important;\n}\n/*   .btn i {\n    font-size: 10px !important;\n  } */\n",""])}}]);